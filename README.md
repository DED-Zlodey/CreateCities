# Приложение создания файла JSON с данными о городах России

## Описание проекта

Решение представляет собой консольное приложение на C#, которое создает или обновляет файл JSON с данными о городах России. Проект использует данные из различных источников, таких как ФИАС, API Яндекс.Карт и других, для получения координат, часовых поясов и других сведений о городах.

## Основные компоненты решения

1. `ICreatorService` - интерфейс, определяющий основные методы сервиса создания файла JSON.
2. `CreatorService` - реализация интерфейса `ICreatorService`, которая содержит основную логику создания и обновления файла JSON.
3. `CountryRf`, `Region_rf`, `City_rf` - классы, представляющие структуру JSON-объекта для хранения данных о стране, регионах и городах России.
4. `Fias`, `City_HHRU` - классы, представляющие структуру JSON-объектов для хранения данных из источников ФИАС и HeadHunter.
5. `YandexCityModel` - класс, представляющий структуру JSON-объекта для хранения ответа API Яндекс.Карт.

## Описание основных методов и функций

1. `Run` - основная функция, которая организует создание списка городов в России. Если файл `Data\Cities.json` не существует, он считывает данные из `Data\Fias.json` и `Data\AllCities.json`, обрабатывает их и создает новый JSON-файл с результирующими данными. Если файл `Data\Cities.json` существует, он вызывает функцию `GetCoordinatesForCities` для обновления координат и часовых поясов городов.
2. `GetCoordinatesForCities` - асинхронно получает координаты и часовой пояс для городов в данных страны. Если координаты не доступны, делает запрос к API Яндекс.Карты для получения их. Функция также обновляет часовой пояс для каждого города.
3. `GetObjectFromJSON` - десериализует JSON-строку в объект указанного типа.
4. `SerializeObjectToFile` - метод сериализует объект указанного типа в JSON-файл по указанному пути.
5. `GetListObjectFromJsonFile` - читает JSON-файл и десериализует его содержимое в список объектов указанного типа.
6. `ReplaceSeparator` - заменяет запятые текущим разделителем десятичных чисел культуры и наоборот.

## Использование решения

Для использования решения необходимо выполнить следующие шаги:

1. Скопировать проект в локальную директорию.
2. Открыть проект в Visual Studio или другом редакторе кода.
3. Установить необходимые NuGet-пакеты.
4. Заменить ключ API в файле конфигурации приложения (`appsettings.json`) на действительный ключ API Яндекс.Карт.
5. Используйте константу `CONSTRAIT_REQUEST_TO_API` для ограничения запросов к API Яндекс.Карт в соответствии с вашим тарифным планом.
6. Собрать проект и запустить его.

## Конфигурация файла appsettings.json для приложения

Файл `appsettings.json` используется для хранения конфигурационных параметров приложения. В этом примере показано, как настроить файл для использования ключа API Яндекс.Карт.

### Пример файла appsettings.json

```json
{
  "ApiKey": "your_yandex_maps_api_key_here"
}
```

## Описание параметров

- `ApiKey`: Содержит ключ API, который используется в приложении для получения координат и других сведений с помощью API Яндекс.Карт. В этом примере необходимо заменить `"your_yandex_maps_api_key_here"` на действительный ключ API.

## Использование ключа API в коде приложения

В коде приложения ключ API можно получить из конфигурации следующим образом:

```csharp
var apiKey = _config["ApiKey"];
```

После выполнения этих шагов приложение создаст или обновит файл `Data\Cities.json` с данными о городах России.
